@{
    ViewData["Title"] = "All Organisations";
}

<h2>@ViewData["Title"]</h2>
<table id="organisationTable" class="table table-bordered table-striped">
    <thead>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Founded Date</th>
        <th>Email</th>
    </tr>
    </thead>
    <tbody>
    <!-- JavaScript vult deze tabel dynamisch -->
    </tbody>
</table>

<button id="refreshButton" class="btn btn-primary">Refresh Organisations</button>

@section Scripts {
    <script>
        async function fetchOrganisations() {
            const response = await fetch('/api/Organisations');
            if (response.ok) {
                const organisations = await response.json();
                const tableBody = document.getElementById('organisationTable').querySelector('tbody');
                tableBody.innerHTML = ''; // Maak de tabel leeg voordat je nieuwe data toevoegt

                organisations.forEach(org => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${org.orgName}</td>
                        <td>${org.orgDescription}</td>
                        <td>${new Date(org.foundedDate).toLocaleDateString()}</td>
                        <td>${org.contactEmail}</td>
                    `;
                    tableBody.appendChild(row);
                });
            } else {
                console.error('Failed to fetch organisations');
            }
        }

        document.getElementById('refreshButton').addEventListener('click', fetchOrganisations);

        // Haal de organisaties op bij het laden van de pagina
        fetchOrganisations();
    </script>
}
