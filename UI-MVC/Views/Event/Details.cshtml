@using Microsoft.AspNetCore.Mvc.TagHelpers
@model EM.BL.Domain.Event

@{
    ViewData["Title"] = "Event Details";
}

<h1>Event Details</h1>

<div>
    <h2>@Model.EventName</h2>
    <dl class="row">
        <dt class="col-sm-2">Description</dt>
        <dd class="col-sm-10">@Model.EventDescription</dd>

        <dt class="col-sm-2">Date</dt>
        <dd class="col-sm-10">@Model.EventDate.ToString("dd/MM/yyyy HH:mm")</dd>

        <dt class="col-sm-2">Category</dt>
        <dd class="col-sm-10">@Model.Category</dd>

        <dt class="col-sm-2">Ticket Price</dt>
        <dd class="col-sm-10">
            @(Model.TicketPrice.HasValue ? $"â‚¬{Model.TicketPrice.Value:F2}" : "Free")
        </dd>
    </dl>
</div>

<h3>Attendees</h3>
@if (Model.Tickets != null && Model.Tickets.Any())
{
    <table class="table table-striped">
        <thead>
        <tr>
            <th>#</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Purchase Date</th>
            <th>Purchase Method</th>
            <th>Details</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var ticket in Model.Tickets)
        {
            <tr>
                <td>@ticket.Visitor.VisitorId</td>
                <td>@ticket.Visitor.FirstName</td>
                <td>@ticket.Visitor.LastName</td>
                <td>@ticket.PurchaseDate.ToString("dd/MM/yyyy HH:mm:ss")</td>
                <td>@ticket.PurchaseMethode</td>
                <td>
                    <a asp-controller="Visitor" asp-action="Details" asp-route-id="@ticket.Visitor.VisitorId">Details</a>
                </td>
            </tr>
        }
        </tbody>
    </table>
}
else
{
    <p>No attendees for this event.</p>
}
